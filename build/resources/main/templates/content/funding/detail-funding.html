<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>

    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="./css/mypage.css" rel="stylesheet">
    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- 폰트 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">

    <!-- CSS 주소 경로 -->
    <link rel="stylesheet" href="/css/detail-funding.css" />
</head>

<script>

    function loadHeaderAndFooter() {
        // 헤더 파일을 가져오는 XMLHttpRequest 객체 생성
        var xhttpHeader = new XMLHttpRequest();
        xhttpHeader.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                // 헤더 파일의 내용을 가져와서 특정 요소의 내용으로 대체
                document.getElementById("header").innerHTML = this.responseText;
            }
        };
        xhttpHeader.open("GET", "header.html", true);
        xhttpHeader.send();

        // 푸터 파일을 가져오는 XMLHttpRequest 객체 생성
        var xhttpFooter = new XMLHttpRequest();
        xhttpFooter.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                // 푸터 파일의 내용을 가져와서 특정 요소의 내용으로 대체
                document.getElementById("footer").innerHTML = this.responseText;
            }
        };
        xhttpFooter.open("GET", "footer.html", true);
        xhttpFooter.send();
    }

    // 페이지 로드 시 헤더와 푸터를 가져오도록 호출
    window.onload = loadHeaderAndFooter;

</script>

<body>
<div id="header"></div>

<main class="container">

    <!-- 좌측 컬럼 / 썸네일 이미지 -->
    <div class="left-column">
        <div class="thumbnail-img">
            <img data-image="t1" class="active" src="./img/thumbnail/t1.jpg" alt="first image">
            <img data-image="t2" src="./img/thumbnail/t2.jpg" alt="second image">
            <img data-image="t3" src="./img/thumbnail/t3.jpg" alt="third image">
            <img data-image="t2" src="./img/thumbnail/t4.jpg" alt="fourth image">
        </div>

        <!-- 이전, 다음 썸네일 버튼 -->
        <div class="img-overlay btn-responsive">
            <a class="prev" onclick="plusSlides(-1)">❮</a>
            <a class="next" onclick="plusSlides(1)">❯</a>
        </div>

    </div>

    <!-- 우측 컬럼 / 펀딩 정보 -->
    <div class="right-column">

        <!-- 펀딩 정보 -->
        <div class="funding-description">
            <h1><b>폐플라스틱으로 만든 양털이불: Almost 양털, 환경을 생각하는 선택</b></h1>
            <p>부드럽고 품질 높은 자바르 얼모스트 양털 이불. 고밀도 정품 극세사 M2 DTY로 제작된 이불은 양털의 질감과 두께를 살렸어요. 얖면은 장모, 뒷면은 양모로 진짜 양털과 같은 퀄리티를 제공합니다.
                하지만 이 이불은 폐플라스틱을 추출해 만든 차세대 소재로, 2년이 걸린 결과물입니다. 닿기만해도 느껴지는 친환경과 편안함을 경험하세요.</p>
            <!-- 달성율 그래프 -->
            <div class="progress" role="progressbar" aria-label="Success example" aria-valuenow="75" aria-valuemin="0"
                 aria-valuemax="100" style="height: 30px;">
                <div class="progress-bar bg-success" style="width: 75%">75% 달성</div>
            </div>
        </div>

        <!-- 기본 수량의 선물 금액 -->
        <div class="funding-price">
            <span id="unit-price">50,000</span>원
        </div>

        <!-- 선물 수량 입력 및 찜하기, 후원하기 버튼 -->
        <div class="order-details">
            <div class="quantity">
                <button id="decrease" onclick="decreaseQuantity()">-</button>
                <input id="quantity" class="quantity" min="1" name="form-0-quantity" value="1" type="number"
                       oninput="updateTotalPrice()" readonly>
                <button id="increase" onclick="increaseQuantity()">+</button>
            </div></span>
            <span class="wishlist-btn" onclick="addToWishlist()" style="text-align: center; align-items: center;">찜하기</span>
            <span class="pay-btn" onclick="goToPayPage()">후원하기</span>
        </div>

        <!-- 총 후원금액 정보 -->
        <div class="total-price">
            <p>총 후원금액</p>
            <span id="total-price">50,000</span><span id="currency-unit">원</span>
        </div>
    </div>
</main>


<div id="footer"></div>


<!-- Bootstrap JS -->

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>


<script>
    // 선물 수량에 따른 총 합계 금액 자동 조정 script
    function updateTotalPrice() {
        const unitPrice = parseInt(document.getElementById('unit-price').innerText.replace(',', ''));
        const quantity = parseInt(document.getElementById('quantity').value);
        const totalPrice = unitPrice * quantity;

        document.getElementById('total-price').innerText = numberWithCommas(totalPrice);
    }

    // 선물 수량 증가 버튼 클릭
    function increaseQuantity() {
        const quantityInput = document.getElementById('quantity');
        quantityInput.value = parseInt(quantityInput.value) + 1;
        updateTotalPrice();
    }

    // 선물 수량 감소 버튼 클릭
    function decreaseQuantity() {
        const quantityInput = document.getElementById('quantity');
        const currentValue = parseInt(quantityInput.value);
        if (currentValue > 1) {
            quantityInput.value = currentValue - 1;
            updateTotalPrice();
        }
    }

    // 찜하기 버튼으로 저장
    function addToWishlist() {
        // Handle wishlist button click, e.g., redirect to wishlist page
        window.location.href = 'wishlist.html';
    }

    // 후원하기 버튼 클릭 시 후원하기 페이지로 이동
    function goToPayPage() {
        // Handle donation button click, e.g., redirect to donation page
        window.location.href = 'donation.html';
    }

    // 천 단위마다 쉼표로 구분하여 표시
    function numberWithCommas(x) {
        return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    }
</script>


</body>



<script>
    $(document).ready(function () {

        $('.color-choose input').on('click', function () {
            var headphonesColor = $(this).attr('data-image');

            $('.active').removeClass('active');
            $('.left-column img[data-image = ' + headphonesColor + ']').addClass('active');
            $(this).addClass('active');
        });

    });

</script>

</html>